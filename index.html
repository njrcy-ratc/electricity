<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electricity Dashboard 2566</title>
    <link rel="stylesheet" href="C:\Users\6272-1\Desktop\git-lab-individual\styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="logo">POWER DASHBOARD</div>
            <nav>
                <ul>
                    <li class="active">Overview</li>
                    <li>Usage Analysis</li>
                    <li>User Stats</li>
                </ul>
            </nav>
        </aside>

        <main class="content">
            <header>
                <h1>Electricity Overview (BE 2566)</h1>
            </header>

            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Total Residential (kWh)</h3>
                    <p id="totalResUsage">0</p>
                </div>
                <div class="stat-card">
                    <h3>Total Business (kWh)</h3>
                    <p id="totalBizUsage">0</p>
                </div>
                <div class="stat-card">
                    <h3>Total EV Charging (kWh)</h3>
                    <p id="totalEvUsage">0</p>
                </div>
            </div>

            <div class="charts-section">
                <div class="chart-box">
                    <h3>Usage by Province (kWh)</h3>
                    <canvas id="usageChart"></canvas>
                </div>
                <div class="chart-box">
                    <h3>Total Users by Type</h3>
                    <canvas id="usersChart"></canvas>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Data embedded directly from electricity_usages_en.json and electricity_users_en.json
        const usageData = [
            {"province": "Krabi", "res": 363957557, "smallBiz": 129821570, "ev": 88738},
            {"province": "Bangkok", "res": 11938107549, "smallBiz": 5769709301, "ev": 61532417},
            {"province": "Kanchanaburi", "res": 696363922, "smallBiz": 226495631, "ev": 264230},
            {"province": "Kalasin", "res": 411232671, "smallBiz": 132867140, "ev": 97933},
            {"province": "Chonburi", "res": 2681645726, "smallBiz": 1055134395, "ev": 1008946},
            {"province": "Chiang Mai", "res": 1527557542, "smallBiz": 666074424, "ev": 1010066}
        ]; // Data reflects subset for BE 2566

        const userTotals = {
            "Residential": 10224160, 
            "Small Business": 1010372,
            "Large Business": 4825
        }; // Aggregate counts derived from electricity_users_en.json

        function init() {
            // Update Stats
            const totalRes = usageData.reduce((sum, item) => sum + item.res, 0);
            const totalBiz = usageData.reduce((sum, item) => sum + item.smallBiz, 0);
            const totalEv = usageData.reduce((sum, item) => sum + item.ev, 0);

            document.getElementById('totalResUsage').innerText = totalRes.toLocaleString();
            document.getElementById('totalBizUsage').innerText = totalBiz.toLocaleString();
            document.getElementById('totalEvUsage').innerText = totalEv.toLocaleString();

            // Bar Chart
            new Chart(document.getElementById('usageChart'), {
                type: 'bar',
                data: {
                    labels: usageData.map(d => d.province),
                    datasets: [{
                        label: 'Residential kWh',
                        data: usageData.map(d => d.res),
                        backgroundColor: '#4318ff'
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false }
            });

            // Doughnut Chart
            new Chart(document.getElementById('usersChart'), {
                type: 'doughnut',
                data: {
                    labels: Object.keys(userTotals),
                    datasets: [{
                        data: Object.values(userTotals),
                        backgroundColor: ['#4318ff', '#6ad2ff', '#eff4fb']
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false }
            });
        }
        init();
    </script>
</body>
</html>